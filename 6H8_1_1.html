<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuy·ªÉn ƒë·ªïi s·ªë: ƒêi·ªÉm v√† ƒê∆∞·ªùng th·∫≥ng - To√°n 6</title>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], processEscapes: true },
            options: { enableMenu: false }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary: #00796b; --secondary: #455a64; --accent: #ff5722; --bg: #f0f4f8;
            --point-color: #d32f2f; --line-color: #1976d2;
            --correct: #2e7d32; --wrong: #c62828;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 20px; line-height: 1.6; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        
        .header { text-align: center; background: linear-gradient(135deg, var(--primary), #004d40); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; }

        /* KI·∫æN TH·ª®C CHI TI·∫æT */
        .section-title { color: var(--primary); border-bottom: 3px solid var(--primary); display: inline-block; margin-top: 30px; padding-bottom: 5px; }
        .lesson-card { background: #fffde7; padding: 25px; border-radius: 15px; border-left: 10px solid #fbc02d; margin-bottom: 20px; }
        .info-box { background: white; padding: 20px; border-radius: 10px; border: 1px solid #e0e0e0; margin: 15px 0; box-shadow: inset 0 2px 5px rgba(0,0,0,0.02); }
        
        /* H√åNH ·∫¢NH Tƒ®NH */
        .static-img { text-align: center; margin: 20px 0; padding: 15px; background: #fafafa; border-radius: 10px; border: 1px solid #eee; }
        .img-label { font-size: 0.9rem; color: #666; font-style: italic; margin-top: 8px; }

        /* M√î PH·ªéNG */
        .sim-container { text-align: center; background: #263238; color: white; padding: 30px; border-radius: 20px; margin: 40px 0; }
        canvas { background: #fff; border-radius: 10px; max-width: 100%; border: 2px solid #546e7a; cursor: crosshair; }
        .slider-ui { width: 80%; margin: 25px auto; }

        /* QUIZ */
        #quiz-auth { text-align: center; padding: 40px; background: #e8f5e9; border-radius: 15px; border: 2px solid var(--primary); }
        .input-name { padding: 12px; width: 280px; border-radius: 8px; border: 2px solid var(--primary); font-size: 1rem; }
        #quiz-content { display: none; }
        .q-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
        .option-btn { padding: 12px; border: 2px solid #dee2e6; border-radius: 10px; cursor: pointer; text-align: center; transition: 0.3s; }
        .option-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .drop-zone { display: inline-block; width: 140px; height: 35px; border: 2px dashed #999; vertical-align: middle; border-radius: 8px; background: #f9f9f9; text-align: center; }
        .draggable { display: inline-block; padding: 5px 12px; background: var(--secondary); color: white; border-radius: 5px; cursor: grab; margin: 5px; }
        
        .ans-feedback { display: none; margin-top: 10px; font-weight: bold; }
        .btn { padding: 15px 40px; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 1.1rem; transition: 0.3s; }
        .btn-main { background: var(--primary); color: white; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üìç B√ÄI 1: ƒêI·ªÇM. ƒê∆Ø·ªúNG TH·∫≤NG</h1>
        <p>Ki·∫øn th·ª©c tr·ªçng t√¢m - H√¨nh h·ªçc tr·ª±c quan 6</p>
    </div>

    <h2 class="section-title">1. ƒêi·ªÉm</h2>
    <div class="lesson-card">
        <div class="info-box">
            <ul>
                <li><b>Kh√°i ni·ªám:</b> D·∫•u ch·∫•m nh·ªè tr√™n m·∫∑t gi·∫•y l√† h√¨nh ·∫£nh c·ªßa ƒëi·ªÉm. ƒêi·ªÉm l√† h√¨nh c∆° b·∫£n nh·∫•t, kh√¥ng c√≥ k√≠ch th∆∞·ªõc (chi·ªÅu d√†i, chi·ªÅu r·ªông).</li>
                <li><b>C√°ch ƒë·∫∑t t√™n:</b> Ng∆∞·ªùi ta d√πng c√°c ch·ªØ c√°i <b>IN HOA</b> nh∆∞ $A, B, C, M...$ ƒë·ªÉ ƒë·∫∑t t√™n cho ƒëi·ªÉm.</li>
                <li><b>L∆∞u √Ω:</b> Khi n√≥i hai ƒëi·ªÉm m√† kh√¥ng n√≥i g√¨ th√™m, ta hi·ªÉu ƒë√≥ l√† hai ƒëi·ªÉm ph√¢n bi·ªát.</li>
            </ul>
        </div>
        <div class="static-img">
            <svg width="300" height="100">
                <circle cx="60" cy="50" r="4" fill="var(--point-color)" />
                <text x="55" y="40" font-weight="bold">A</text>
                <circle cx="150" cy="50" r="4" fill="var(--point-color)" />
                <text x="145" y="40" font-weight="bold">B</text>
                <circle cx="240" cy="50" r="4" fill="var(--point-color)" />
                <text x="235" y="40" font-weight="bold">C</text>
            </svg>
            <div class="img-label">H√¨nh 1: Ba ƒëi·ªÉm A, B, C ph√¢n bi·ªát</div>
        </div>
    </div>

    <h2 class="section-title">2. ƒê∆∞·ªùng th·∫≥ng</h2>
    <div class="lesson-card">
        <div class="info-box">
            <ul>
                <li><b>H√¨nh ·∫£nh th·ª±c t·∫ø:</b> S·ª£i ch·ªâ cƒÉng th·∫≥ng, m√©p th∆∞·ªõc k·∫ª, v·∫°ch k·∫ª ƒë∆∞·ªùng th·∫≥ng t·∫Øp...</li>
                <li><b>ƒê·∫∑c ƒëi·ªÉm:</b> ƒê∆∞·ªùng th·∫≥ng <b>kh√¥ng b·ªã gi·ªõi h·∫°n</b> v·ªÅ c·∫£ hai ph√≠a.</li>
                <li><b>C√°ch ƒë·∫∑t t√™n:</b> 
                    <br>- C√°ch 1: D√πng m·ªôt ch·ªØ c√°i <b>in th∆∞·ªùng</b> ($a, b, m, n...$).
                    <br>- C√°ch 2: D√πng hai ch·ªØ c√°i <b>in th∆∞·ªùng</b> ($xy, uv...$).
                    <br>- C√°ch 3: D√πng t√™n c·ªßa hai ƒëi·ªÉm m√† n√≥ ƒëi qua ($AB, MN...$).
                </li>
            </ul>
        </div>
        <div class="static-img">
            <svg width="500" height="120">
                <line x1="50" y1="30" x2="200" y2="30" stroke="var(--line-color)" stroke-width="2" />
                <text x="210" y="35" font-style="italic">a</text>
                <line x1="50" y1="80" x2="200" y2="80" stroke="var(--line-color)" stroke-width="2" />
                <text x="40" y="95">x</text> <text x="205" y="95">y</text>
                <line x1="300" y1="55" x2="450" y2="55" stroke="var(--line-color)" stroke-width="2" />
                <circle cx="340" cy="55" r="3" fill="black" /> <text x="335" y="45">A</text>
                <circle cx="410" cy="55" r="3" fill="black" /> <text x="405" y="45">B</text>
            </svg>
            <div class="img-label">H√¨nh 2: C√°c c√°ch ƒë·∫∑t t√™n ƒë∆∞·ªùng th·∫≥ng (a, xy, AB)</div>
        </div>
    </div>

    <h2 class="section-title">3. ƒêi·ªÉm thu·ªôc v√† kh√¥ng thu·ªôc ƒë∆∞·ªùng th·∫≥ng</h2>
    <div class="lesson-card">
        <div class="info-box">
            <p>Cho ƒëi·ªÉm $M$ v√† ƒë∆∞·ªùng th·∫≥ng $d$:</p>
            <ul>
                <li>N·∫øu ƒëi·ªÉm $M$ <b>n·∫±m tr√™n</b> ƒë∆∞·ªùng th·∫≥ng $d$, ta n√≥i "$M$ thu·ªôc $d$". K√≠ hi·ªáu: $M \in d$.</li>
                <li>N·∫øu ƒëi·ªÉm $M$ <b>kh√¥ng n·∫±m tr√™n</b> ƒë∆∞·ªùng th·∫≥ng $d$, ta n√≥i "$M$ kh√¥ng thu·ªôc $d$". K√≠ hi·ªáu: $M \notin d$.</li>
            </ul>
        </div>
        <div class="static-img">
             
            <div class="img-label">H√¨nh 3: Quan h·ªá gi·ªØa ƒëi·ªÉm v√† ƒë∆∞·ªùng th·∫≥ng ($M \in d, N \notin d$)</div>
        </div>
    </div>

    <div class="sim-container">
        <h2>üéÆ M√ÅY TH·ª∞C NGHI·ªÜM ƒêI·ªÇM & ƒê∆Ø·ªúNG TH·∫≤NG</h2>
        <p>K√©o thanh tr∆∞·ª£t ƒë·ªÉ xem v·ªã tr√≠ ƒëi·ªÉm thay ƒë·ªïi v√† k√Ω hi·ªáu t∆∞∆°ng ·ª©ng</p>
        <canvas id="geoCanvas" width="600" height="250"></canvas>
        <div class="slider-ui">
            <input type="range" id="geoSlider" min="40" max="210" value="125" style="width: 100%;">
            <div id="geoReadout" style="color: #ffeb3b; font-size: 1.5rem; margin-top: 15px; font-weight: bold;">ƒêang t·∫£i...</div>
        </div>
    </div>

    <div id="quiz-auth">
        <h2>üìù B√ÄI T·∫¨P T·ª∞ ƒê√ÅNH GI√Å</h2>
        <p>H·ªá th·ªëng b√†i t·∫≠p tr·∫Øc nghi·ªám v√† k√©o th·∫£ (kh√¥ng c·∫ßn g√µ d·∫•u)</p>
        <input type="text" id="userName" class="input-name" placeholder="H·ªç v√† t√™n h·ªçc sinh..."><br><br>
        <button class="btn btn-main" onclick="startQuiz()">L√ÄM B√ÄI NGAY</button>
    </div>

    <div id="quiz-content">
        <div style="display:flex; justify-content: space-between; padding: 15px; background: var(--secondary); color:white; border-radius: 10px; margin-bottom: 20px;">
            <span>H·ªçc sinh: <b id="stName"></b></span>
            <span>‚è± Th·ªùi gian: <b id="timeClock">15:00</b></span>
        </div>
        <div id="quiz-list"></div>
        <button class="btn btn-main" id="subBtn" onclick="finishQuiz()" style="display:block; margin: 40px auto; background: var(--accent);">N·ªòP B√ÄI</button>
        <div id="final-result" style="text-align:center; font-size: 2rem; font-weight: bold; margin-bottom: 50px;"></div>
    </div>
</div>

<script>
    // --- CANVAS ENGINE ---
    const canvas = document.getElementById('geoCanvas');
    const ctx = canvas.getContext('2d');
    const slider = document.getElementById('geoSlider');
    const readout = document.getElementById('geoReadout');

    function draw(posY) {
        ctx.clearRect(0,0,600,250);
        // V·∫Ω ƒë∆∞·ªùng d
        ctx.beginPath(); ctx.moveTo(50, 125); ctx.lineTo(550, 125);
        ctx.strokeStyle = "#1976d2"; ctx.lineWidth = 4; ctx.stroke();
        ctx.fillStyle = "#1976d2"; ctx.font = "bold 20px Arial"; ctx.fillText("d", 560, 132);

        // V·∫Ω ƒëi·ªÉm M
        ctx.beginPath(); ctx.arc(300, posY, 8, 0, Math.PI*2);
        ctx.fillStyle = "#d32f2f"; ctx.fill();
        ctx.fillText("M", 310, posY - 15);

        // Logic Check
        if(Math.abs(posY - 125) < 6) {
            readout.innerText = "ƒêi·ªÉm M THU·ªòC ƒë∆∞·ªùng th·∫≥ng d: M ‚àà d";
            readout.style.color = "#4caf50";
        } else {
            readout.innerText = "ƒêi·ªÉm M KH√îNG THU·ªòC ƒë∆∞·ªùng th·∫≥ng d: M ‚àâ d";
            readout.style.color = "#ffeb3b";
        }
    }
    slider.oninput = () => draw(slider.value);
    draw(125);

    // --- QUIZ SYSTEM ---
    const quizData = [
        { id: 1, type: 'mcq', text: 'ƒê·ªÉ ƒë·∫∑t t√™n cho m·ªôt ƒëi·ªÉm, ng∆∞·ªùi ta d√πng:', opts: ['Ch·ªØ c√°i in hoa', 'Ch·ªØ c√°i in th∆∞·ªùng', 'Ch·ªØ s·ªë'], corr: 0 },
        { id: 2, type: 'mcq', text: 'H√¨nh ·∫£nh m√©p th∆∞·ªõc k·∫ª cho ta h√¨nh ·∫£nh c·ªßa:', opts: ['ƒêi·ªÉm', 'ƒê∆∞·ªùng th·∫≥ng', 'G√≥c'], corr: 1 },
        { id: 3, type: 'drag', text: 'ƒêi·ªÉm $A$ thu·ªôc ƒë∆∞·ªùng th·∫≥ng $b$ ƒë∆∞·ª£c k√Ω hi·ªáu l√†:', opts: ['$A \\in b$', '$A \\notin b$'], corr: '$A \\in b$' },
        { id: 4, type: 'mcq', text: 'C√≥ bao nhi√™u ƒë∆∞·ªùng th·∫≥ng ƒëi qua hai ƒëi·ªÉm ph√¢n bi·ªát cho tr∆∞·ªõc?', opts: ['0', '1', 'V√¥ s·ªë'], corr: 1 },
        { id: 5, type: 'mcq', text: 'ƒê∆∞·ªùng th·∫≥ng $xy$ c√≥ b·ªã gi·ªõi h·∫°n ƒë·ªô d√†i kh√¥ng?', opts: ['C√≥ b·ªã gi·ªõi h·∫°n', 'Kh√¥ng b·ªã gi·ªõi h·∫°n'], corr: 1 },
        { id: 6, type: 'drag', text: 'Ch·ªçn k√Ω hi·ªáu ƒë√∫ng: ƒêi·ªÉm $B$ n·∫±m ngo√†i ƒë∆∞·ªùng th·∫≥ng $m$.', opts: ['$B \\in m$', '$B \\notin m$'], corr: '$B \\notin m$' },
        { id: 7, type: 'mcq', text: 'ƒêi·ªÉm $C$ n·∫±m tr√™n ƒë∆∞·ªùng th·∫≥ng $a$. Ph√°t bi·ªÉu n√†o SAU ƒê√ÇY L√Ä ƒê√öNG?', opts: ['$C$ thu·ªôc $a$', '$C$ kh√¥ng thu·ªôc $a$', '$a$ kh√¥ng ch·ª©a $C$'], corr: 0 }
    ];

    let userAnswers = {};
    let timer;

    function startQuiz() {
        const name = document.getElementById('userName').value;
        if(!name) return alert("Em nh·∫≠p t√™n tr∆∞·ªõc nh√©!");
        document.getElementById('quiz-auth').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('stName').innerText = name;
        renderQuiz();
        
        let t = 900;
        timer = setInterval(() => {
            t--; let m = Math.floor(t/60), s = t%60;
            document.getElementById('timeClock').innerText = `${m}:${s<10?'0'+s:s}`;
            if(t<=0) finishQuiz();
        }, 1000);
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-list');
        container.innerHTML = "";
        quizData.forEach((q, i) => {
            let div = document.createElement('div');
            div.className = 'q-card';
            div.id = `card_${q.id}`;
            let html = `<b>C√¢u ${i+1}:</b> ${q.text}<br>`;
            
            if(q.type === 'mcq') {
                html += `<div class="options-grid">`;
                q.opts.forEach((o, idx) => {
                    html += `<div class="option-btn" onclick="selectMCQ(${q.id}, ${idx})" id="opt_${q.id}_${idx}">${o}</div>`;
                });
                html += `</div>`;
            } else {
                html += `<div style="margin-top:10px;"><div class="drop-zone" id="dz_${q.id}">K√©o v√†o ƒë√¢y</div> `;
                q.opts.forEach(o => {
                    let oid = o.replace(/[^a-zA-Z]/g,'');
                    html += `<div class="draggable" draggable="true" id="dg_${q.id}_${oid}" data-v="${o}">${o}</div>`;
                });
                html += `</div>`;
            }
            html += `<div class="ans-feedback" id="fb_${q.id}"></div>`;
            div.innerHTML = html;
            container.appendChild(div);
        });
        if (window.MathJax) MathJax.typesetPromise();
        initDrag();
    }

    function selectMCQ(qId, idx) {
        userAnswers[qId] = idx;
        document.querySelectorAll(`#card_${qId} .option-btn`).forEach(b => b.classList.remove('selected'));
        document.getElementById(`opt_${qId}_${idx}`).classList.add('selected');
    }

    function initDrag() {
        document.querySelectorAll('.draggable').forEach(d => d.ondragstart = e => e.dataTransfer.setData('text', e.target.id));
        document.querySelectorAll('.drop-zone').forEach(z => {
            z.ondragover = e => e.preventDefault();
            z.ondrop = e => {
                e.preventDefault();
                const id = e.dataTransfer.getData('text');
                if(id.includes(`dg_${z.id.split('_')[1]}`)) {
                    z.innerHTML = ""; z.appendChild(document.getElementById(id));
                }
            }
        });
    }

    function finishQuiz() {
        clearInterval(timer);
        let score = 0;
        quizData.forEach(q => {
            let isCorrect = false;
            let feedback = document.getElementById(`fb_${q.id}`);
            if(q.type === 'mcq') {
                if(userAnswers[q.id] === q.corr) isCorrect = true;
            } else {
                const zone = document.getElementById(`dz_${q.id}`);
                if(zone.children.length > 0 && zone.children[0].dataset.v === q.corr) isCorrect = true;
            }
            feedback.style.display = 'block';
            if(isCorrect) {
                score++; feedback.innerHTML = "<span style='color:green'>‚úì ƒê√∫ng!</span>";
                document.getElementById(`card_${q.id}`).style.borderColor = "green";
            } else {
                feedback.innerHTML = `<span style='color:red'>‚úó Sai. ƒê√°p √°n: ${q.type==='mcq'?q.opts[q.corr]:q.corr}</span>`;
                document.getElementById(`card_${q.id}`).style.borderColor = "red";
            }
        });
        document.getElementById('final-result').innerText = `K·∫æT QU·∫¢: ${score} / ${quizData.length}`;
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>
</body>
</html>